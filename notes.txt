/src
 â”œâ”€â”€ main.ts
 â”œâ”€â”€ app.module.ts
 â”‚
 â”œâ”€â”€ modules/
 â”‚   â”œâ”€â”€ bets/
 â”‚   â”‚   â”œâ”€â”€ bets.controller.ts
 â”‚   â”‚   â”œâ”€â”€ bets.service.ts
 â”‚   â”‚   â”œâ”€â”€ bets.module.ts
 â”‚   â”‚   â”œâ”€â”€ dto/
 â”‚   â”‚   â”‚   â”œâ”€â”€ create-bet.dto.ts
 â”‚   â”‚   â”‚   â””â”€â”€ bet-response.dto.ts
 â”‚   â”‚   â”œâ”€â”€ entities/
 â”‚   â”‚   â”‚   â””â”€â”€ bet.entity.ts
 â”‚   â”‚   â””â”€â”€ match.service.ts
 â”‚   â”‚
 â”‚   â”œâ”€â”€ ocr/
 â”‚   â”‚   â”œâ”€â”€ ocr.service.ts
 â”‚   â”‚   â”œâ”€â”€ ocr.module.ts
 â”‚   â”‚   â””â”€â”€ parsers/
 â”‚   â”‚       â”œâ”€â”€ preprocess.ts
 â”‚   â”‚       â””â”€â”€ regex-parser.ts
 â”‚   â”‚
 â”‚   â”œâ”€â”€ users/
 â”‚   â”‚   â”œâ”€â”€ users.controller.ts
 â”‚   â”‚   â”œâ”€â”€ users.service.ts
 â”‚   â”‚   â”œâ”€â”€ users.module.ts
 â”‚   â”‚   â””â”€â”€ dto/
 â”‚   â”‚       â””â”€â”€ create-user.dto.ts
 â”‚   â”‚
 â”‚   â”œâ”€â”€ auth/
 â”‚   â”‚   â”œâ”€â”€ auth.module.ts
 â”‚   â”‚   â”œâ”€â”€ auth.service.ts
 â”‚   â”‚   â””â”€â”€ strategies/
 â”‚   â”‚       â””â”€â”€ oauth.strategy.ts
 â”‚   â”‚
 â”‚   â””â”€â”€ common/
 â”‚       â”œâ”€â”€ prisma.service.ts
 â”‚       â”œâ”€â”€ logger.service.ts
 â”‚       â”œâ”€â”€ filters/
 â”‚       â”œâ”€â”€ interceptors/
 â”‚       â””â”€â”€ decorators/
 â”‚
 â”œâ”€â”€ queue/
 â”‚   â”œâ”€â”€ queue.module.ts
 â”‚   â””â”€â”€ bet-ocr.processor.ts
 â”‚
 â””â”€â”€ config/
     â”œâ”€â”€ env.ts
     â””â”€â”€ validation.ts



ğŸ§  The Core Idea
You want to support multiple â€œentry pointsâ€ for users to share bets â€” screenshots, shared links, or direct data from different sportsbooks (FanDuel, DraftKings, ESPN Bet, Bet365, Underdog, etc).
Each of these entry points has a different format and requires different handling logic.

ğŸ§© Input Types (How Users Share)
TypeExampleHow Itâ€™s SharedWhat You GetWhat You Need to Do1ï¸âƒ£ Screenshot UploadImage from phone gallery or Discord uploadUser posts a .jpg/.pngImage URLRun OCR â†’ extract text â†’ parse event/stake/odds2ï¸âƒ£ Share Link (Direct)â€œShare your betâ€ link from FanDuel/DraftKingsUser pastes link into Discord or your siteURLFetch page metadata or API â†’ parse structured data3ï¸âƒ£ Native Share â†’ Your AppUser taps â€œShareâ€ on sportsbook â†’ chooses your appOS passes link or imageURL or image blobSame as above, just bypasses Discord4ï¸âƒ£ Manual Entry (Fallback)User types event and odds manuallyForm inputStructured data alreadyJust validate and save5ï¸âƒ£ API Integration (future)OAuth or authorized API from sportsbookDirectly from sportsbook APIFull structured bet dataNo OCR â€” just store and sync

ğŸ—ï¸ Recommended Flow for Each Source
ğŸ–¼ï¸ 1. Screenshots (like that DraftKings slip)

Sent via Discord, uploaded manually, or shared from phone.

These are unstructured â†’ OCR is mandatory.

Each book (FanDuel, DK, etc.) has unique visual layouts, so:
Youâ€™ll want to train or tune OCR per platform.
Use small regex â€œparsersâ€ per sportsbook once text is extracted.
â¡ï¸ Best pipeline:
Discord Upload â†’ OCR Service â†’ BetParser (detect DK/FanDuel/etc.) â†’ DB

ğŸ”— 2. Shared Links
These are gold â€” sportsbooks embed structured data in the link or its metadata.
For example:
DraftKings share URLs can include JSON payloads in the query string.
FanDuel links resolve to pages with accessible metadata (you can scrape or call their public endpoints).

â¡ï¸ Best pipeline:
Discord / Web â†’ URL Handler â†’ BetParser (link-based) â†’ DB
This path doesnâ€™t need OCR at all, just a fetch + parser for the sportsbook.

ğŸ“± 3. OS-Level Share
If you make a web app or PWA, users could â€œshareâ€ from DraftKings â†’ your domain (youâ€™d register a share target in your app manifest).
This is just another variant of the link or image upload, but itâ€™s faster because it skips Discord entirely.
â¡ï¸ Best pipeline:
System Share â†’ Web Route (/share) â†’ Same logic as link/image handler

ğŸ§¾ 4. Manual Entry
For when OCR or link parsing fails â€” let users enter:
Event nam
Market
Odds
Stake
Screenshot (optional)
This is your fallback UX, and itâ€™s essential because OCR will never be 100% perfect.
â¡ï¸ Best pipeline:
Form â†’ /bets â†’ DB

ğŸ”Œ 5. Direct Integrations (future goal)
This is long-term, but absolutely achievable:
Once you have user OAuth, you could let them connect DraftKings or FanDuel accounts.
Then your system can poll or subscribe to their bets directly â€” no screenshots or links needed
â¡ï¸ Best pipeline:
Sportsbook API â†’ Your Backend â†’ DB â†’ Frontend

âš™ï¸ The Smart Way to Handle All of These
You can abstract all inputs behind one entry point in your backend:
POST /bets
{
  type: "image" | "link" | "manual",
  source: "draftkings" | "fanduel" | "espn" | "underdog",
  imageUrl?: string,
  link?: string,
  data?: { ...manual fields... }
}
Then your BetsService.create() decides:
If type === "image" â†’ run OCR
If type === "link" â†’ run link parser
If type === "manual" â†’ save directly
Everything funnels into the same place â€” clean, consistent, and future-proof.

ğŸª„ Summary of Best Practices


Keep your OCR isolated and generic.
Keep book-specific parsing separate (each sportsbook gets its own small parser).
Use a single /bets endpoint for all ingestion.
Store raw text or raw data alongside parsed values for debugging/improvement.
Include a fallback manual entry UI.
Long-term: move toward link parsing and API access, away from OCR.
If youâ€™d like, I can sketch a flow diagram showing how all 5 input types merge into the same unified pipeline (from Discord/Share â†’ backend â†’ database â†’ frontend). Would you want to see that next?